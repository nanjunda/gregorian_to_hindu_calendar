<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Guide | Cosmic Explorer Masterclass</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Outfit:wght@300;500;700&display=swap"
        rel="stylesheet">
    <style>
        .guide-content {
            line-height: 1.8;
            font-size: 1.1rem;
            color: var(--text-white);
        }

        .guide-content h2 {
            color: var(--secondary);
            margin-top: 3rem;
            font-family: 'Outfit', sans-serif;
            font-size: 2rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .guide-content h3 {
            color: var(--secondary);
            margin-top: 2rem;
            font-family: 'Outfit', sans-serif;
        }

        .guide-content p {
            margin-bottom: 1.5rem;
        }

        .guide-content strong {
            color: var(--secondary);
        }

        .back-link {
            display: inline-block;
            margin-top: 2rem;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s;
        }

        .back-link:hover {
            color: var(--secondary);
        }

        /* 3D Visual Containers */
        .visual-block {
            margin: 2rem 0;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            position: relative;
            min-height: 480px;
        }

        .visual-iframe {
            width: 100%;
            height: 480px;
            border: none;
            display: block;
        }

        .visual-caption {
            padding: 1rem;
            background: rgba(13, 17, 23, 0.8);
            font-size: 0.85rem;
            color: var(--secondary);
            text-align: center;
            border-top: 1px solid var(--border-color);
        }

        .visual-significance {
            padding: 1rem;
            background: rgba(0, 210, 255, 0.05);
            border-left: 3px solid var(--secondary);
            font-size: 0.95rem;
            line-height: 1.6;
            color: var(--text-white);
            margin-bottom: 2rem;
        }

        /* Reactive Glossary Styles */
        .reactive-term {
            color: var(--secondary);
            font-weight: 600;
            border-bottom: 1px dashed var(--secondary);
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }

        .reactive-term:hover {
            background: rgba(0, 210, 255, 0.1);
            border-bottom-style: solid;
        }

        .tooltip-bubble {
            visibility: hidden;
            width: 200px;
            background-color: var(--card-bg);
            color: var(--text-white);
            text-align: center;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid var(--secondary);
            font-size: 0.85rem;
            line-height: 1.4;
            pointer-events: none;
        }

        .reactive-term:hover .tooltip-bubble {
            visibility: visible;
            opacity: 1;
        }

        .highlight-flash {
            animation: flash-border 1.5s ease;
        }

        @keyframes flash-border {
            0% {
                border-color: var(--border-color);
                box-shadow: none;
            }

            50% {
                border-color: var(--secondary);
                box-shadow: 0 0 20px var(--secondary);
            }

            100% {
                border-color: var(--border-color);
                box-shadow: none;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>Cosmic Explorer</h1>
            <p>Student Master-Guide to the Stars</p>
        </header>

        <main>
            <div class="actions" style="margin-bottom: 2rem; display: flex; gap: 1rem; align-items: center;">
                <a href="/" class="back-link" style="margin-top: 0;">‚Üê Return to Converter</a>
                <button id="audio-tutor-btn" class="btn glass"
                    style="background: rgba(0, 210, 255, 0.1); border: 1px solid var(--secondary); color: var(--secondary); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-family: 'Outfit', sans-serif; font-weight: 600;">
                    <span id="audio-icon">üéôÔ∏è</span> <span id="audio-text">Listen to Tutor</span>
                </button>
            </div>

            <section class="card glass guide-content">
                <h2>Welcome, Time Traveler!</h2>
                <p>
                    Have you ever wondered what the universe looked like the exact moment you were born?
                    The sky is a giant, living clock. For thousands of years, civilizations mastered the art of reading
                    this clock without a single piece of electronic hardware.
                    <br><br>
                    This guide will teach you how to read the "Cosmic Dashboard" by understanding the 3D physics behind
                    <strong>Sidereal</strong> time, the Earth's <strong>Precession</strong>, and the geometry of
                    <strong>Tithis</strong>.
                </p>

                <h2>1. The Great Wobble (Precession)</h2>
                <p>
                    Imagine Earth as a giant spinning top. As a top starts to slow down, it begins to "wobble." Earth
                    does the same thing! This wobble is super slow‚Äîit takes <strong>25,800 years</strong> to make one
                    full circle. This is called <span class="reactive-term"
                        onclick="triggerVisualHighlight('PRECESSION_WOBBLE')">Precession<span class="tooltip-bubble">The
                            slow conical wobble of Earth's axis (25,800 year cycle). <br><i>(Click to see 3D
                                visual)</i></span></span>.
                </p>

                <div id="PRECESSION_WOBBLE" class="visual-block-wrapper">
                    <div class="visual-block">
                        <iframe class="visual-iframe" src="/visuals/precession"></iframe>
                        <div class="visual-caption">üñ•Ô∏è Interactive Precession Module</div>
                    </div>
                    <div class="visual-significance">
                        <strong>Significance:</strong> Because of this wobble, the "North Star" isn't always the same.
                        Right now it's Polaris, but in 12,000 years, it will be Vega. This wobble is why our maps of the
                        stars must be updated over centuries.
                    </div>
                </div>

                <h2>2. Ancient vs. Modern (The Zodiac Aligner)</h2>
                <p>
                    There are two main ways to look at the sky. <strong>Western Astrology</strong> (Tropical) uses a map
                    from 2,000 years ago. <strong>Hindu Astronomy</strong> (Sidereal) uses the real-time positions of
                    the stars today.
                    <br><br>
                    The difference between these two is called <span class="reactive-term"
                        onclick="triggerVisualHighlight('ZODIAC_COMPARISON')">Ayanamsha<span class="tooltip-bubble">The
                            angular drift (24¬∞) between seasons and stars. <br><i>(Click to see 3D
                                visual)</i></span></span>. It is currently about 24 degrees‚Äîroughly the width of one
                    entire Zodiac sign!
                </p>

                <div id="ZODIAC_COMPARISON" class="visual-block-wrapper">
                    <div class="visual-block">
                        <iframe class="visual-iframe" src="/visuals/zodiac-comparison"></iframe>
                        <div class="visual-caption">üñ•Ô∏è Tropical vs. Sidereal Aligner</div>
                    </div>
                    <div class="visual-significance">
                        <strong>Significance:</strong> This is why your "Star Sign" in a Western magazine is different
                        from your Rashi in this app. The Hindu system accounts for the 2,000 years of "drift" caused by
                        the Earth's wobble.
                    </div>
                </div>

                <h2>3. The Geometry of a Tithi</h2>
                <p>
                    In the Hindu calendar, a "day" is not just 24 hours. A <span class="reactive-term"
                        onclick="triggerVisualHighlight('MOON_PHASE_3D')">Tithi<span class="tooltip-bubble">A lunar day,
                            defined by every 12¬∞ of Sun-Moon separation. <br><i>(Click to see 3D
                                visual)</i></span></span> is a measurement of the <strong>angle</strong> between the Sun
                    and the Moon as seen from Earth.
                    Every 12 degrees of separation creates a new Tithi.
                </p>

                <div id="MOON_PHASE_3D" class="visual-block-wrapper">
                    <div class="visual-block">
                        <iframe class="visual-iframe" src="/visuals/moon-phase"></iframe>
                        <div class="visual-caption">üñ•Ô∏è Tithi Phase Protractor</div>
                    </div>
                    <div class="visual-significance">
                        <strong>Significance:</strong> When the Sun and Moon are together (0¬∞), it is Amavasya (New
                        Moon). When they are opposite (180¬∞), it is Purnima (Full Moon). A Tithi tracks the precise
                        geometric relationship between these two lights.
                    </div>
                </div>

                <h2>4. The Galactic Clock (Nakshatras)</h2>
                <p>
                    The Moon moves very fast‚Äîit travels through the entire sky in about 27 days. Ancient astronomers
                    divided the sky into 27 equal "Lunar Mansions" called <span class="reactive-term"
                        onclick="triggerVisualHighlight('CONSTELLATION_MAP')">Nakshatras<span
                            class="tooltip-bubble">Star clusters the moon visits daily. <br><i>(Click to see 3D
                                visual)</i></span></span>.
                </p>

                <div id="CONSTELLATION_MAP" class="visual-block-wrapper">
                    <div class="visual-block">
                        <iframe class="visual-iframe" src="/visuals/constellations"></iframe>
                        <div class="visual-caption">üñ•Ô∏è Sky Focus: Nakshatra Grid</div>
                    </div>
                    <div class="visual-significance">
                        <strong>Significance:</strong> While the Zodiac (12 signs) tracks the Sun's yearly journey, the
                        Nakshatras (27 signs) track the Moon's daily movement. It is a much more precise way to measure
                        time.
                    </div>
                </div>

                <h2>Summary: Privacy & Precision</h2>
                <p>
                    This app uses NASA's JPL Ephemeris data to ensure that when you see a planet in a sign, it is
                    <strong>scientifically there</strong>. We do not store any of your data; all calculations happen in
                    real-time and are erased the moment you leave.
                </p>

                <div style="text-align: center; margin-top: 3rem;">
                    <a href="/" class="btn"
                        style="padding: 1rem 2.5rem; border-radius: 50px; background: var(--secondary); color: #000; font-weight: 700; text-decoration: none;">Launch
                        the Converter</a>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Hindu Panchanga Engine | Student Education Initiative</p>
        </footer>
    </div>

    <script>
        // Reactive Highlights
        function triggerVisualHighlight(tagId) {
            const el = document.getElementById(tagId);
            if (el) {
                el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                el.classList.add('highlight-flash');
                setTimeout(() => el.classList.remove('highlight-flash'), 2000);

                // Signal the iframe to pulse if it supports it
                const iframe = el.querySelector('iframe');
                if (iframe) {
                    iframe.contentWindow.postMessage({ action: 'pulse' }, '*');
                }
            }
        }

        // Audio Narration Logic
        const audioBtn = document.getElementById('audio-tutor-btn');
        let utterance = null;

        audioBtn.onclick = () => {
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
                updateAudioUI(false);
                return;
            }

            const guideText = document.querySelector('.guide-content').innerText;
            utterance = new SpeechSynthesisUtterance(guideText);
            utterance.pitch = 1.1;
            utterance.rate = 1.0;

            utterance.onstart = () => updateAudioUI(true);
            utterance.onend = () => updateAudioUI(false);
            utterance.onerror = () => updateAudioUI(false);

            window.speechSynthesis.speak(utterance);
        };

        function updateAudioUI(isPlaying) {
            const icon = document.getElementById('audio-icon');
            const text = document.getElementById('audio-text');
            if (isPlaying) {
                icon.innerText = "üõë";
                text.innerText = "Stop Narration";
                audioBtn.style.background = "rgba(231, 76, 60, 0.2)";
            } else {
                icon.innerText = "üéôÔ∏è";
                text.innerText = "Listen to Tutor";
                audioBtn.style.background = "rgba(0, 210, 255, 0.1)";
            }
        }
    </script>
</body>

</html>